<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>PS2 Order</title>
<style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f3f3f3;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #131921;
      color: white;
      text-align: center;
      padding: 1rem;
      font-size: 1.5rem;
    }
    .container {
      max-width: 900px;
      margin: 2rem auto;
      background: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .price-section {
      margin-bottom: 20px;
    }
    .renewed-label {
      background: red;
      color: white;
      padding: 4px 10px;
      border-radius: 4px;
      font-weight: bold;
      display: inline-block;
      margin-bottom: 10px;
    }
    .accessory-section h3 {
      margin-top: 30px;
      border-bottom: 1px solid #ccc;
      padding-bottom: 5px;
    }
    .category-box {
      background-color: #fafafa;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 25px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.08);
    }
    .accessory {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 8px 0;
    }
    button {
      padding: 5px 10px;
      background-color: #f0c14b;
      border: 1px solid #a88734;
      border-radius: 4px;
      cursor: pointer;
    }
    #buyNow {
      background-color: #2ecc71;
      color: white;
      font-size: 18px;
      padding: 15px;
      border-radius: 8px;
      border: none;
      width: 100%;
      margin-top: 20px;
    }
  
#totalSticky {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background: #2ecc71;
  color: white;
  font-size: 18px;
  font-weight: bold;
  padding: 10px;
  text-align: center;
  z-index: 999;
  box-shadow: 0 -2px 5px rgba(0,0,0,0.2);
}
body { padding-bottom: 160px; }

#upiFixed {
  position: fixed;
  bottom: 60px;
  left: 0;
  width: 100%;
  background: #6200ea;
  color: white;
  font-size: 18px;
  font-weight: bold;
  padding: 12px;
  text-align: center;
  z-index: 998;
  text-decoration: none;
}

.contact-icons {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-top: 20px;
}
.contact-icons a {
  width: 40px;
  height: 40px;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #f0f0f0;
  border-radius: 50%;
  text-decoration: none;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}
.contact-icons a:hover {
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}
.contact-icons a i {
  font-size: 20px;
  color: #555;
}

.small-note {
  font-size: 13px;
  color: #444;
}
</style>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body>
<header><a href="https://www.gamesplanet.shop" target="_blank" style="color: white; text-decoration: none; font-weight: bold; font-family: sans-serif;">GAMES PLANET</a></header>

<div class="container">
  <h1 style="text-align: center; font-weight: bold; font-size: 24px; margin-bottom: 1rem; color: #131921;">PlayStation 2 Slim (Renewed)</h1>

  <div class="price-section">
    <div class="renewed-label">Renewed</div>

    <!-- COLOR SELECTOR PATCHED -->
    <label style="font-weight:bold; margin-right:8px;">Choose Colour:</label>
    <select id="ps2Color" onchange="updateColorDisplay(); updateTotal()" style="padding:8px; border-radius:6px;">
      <option value="black">Black - ₹6299</option>
      <option value="white">White - ₹6799</option>
      <option value="silver">Silver - ₹6999</option>
    </select>

    <h2 style="margin-top:10px">
      Price: <s id="mrpValue">₹7399</s>
      <span id="basePriceDisplay">₹6299</span>
      <span id="discountPercent" style="color:#27ae60;font-weight:bold;">(15% OFF)</span>
    </h2>

    <div class="accessory">
      <label>Warranty (1st month free, ₹300/month extra):</label>
      <div>
        <button onclick="changeWarranty(-1)">-</button>
        <span id="warranty">1</span> month
        <button onclick="changeWarranty(1)">+</button>
      </div>
    </div>
  </div>

  <div class="accessory-section">
    <h3>Cables &amp; TV Connection</h3>
    <div class="category-box">
      <div class="accessory">Power Adapter with Cable - ₹499
        <div><button onclick="changeQty(0, -1)">-</button> <span id="qty-0">0</span> <button onclick="changeQty(0, 1)">+</button></div>
      </div>
      <div class="accessory">AV Cable - ₹199
        <div><button onclick="changeQty(1, -1)">-</button> <span id="qty-1">0</span> <button onclick="changeQty(1, 1)">+</button></div>
      </div>
      <div class="accessory">HDMI Converter - ₹550
        <div><button onclick="changeQty(2, -1)">-</button> <span id="qty-2">0</span> <button onclick="changeQty(2, 1)">+</button></div>
      </div>
      <div class="accessory">HDMI Normal 1.5m Cable - ₹90
        <div><button onclick="changeQty(3, -1)">-</button> <span id="qty-3">0</span> <button onclick="changeQty(3, 1)">+</button></div>
      </div>
      <div class="accessory">HDMI Best 1.5m Cable - ₹299
        <div><button onclick="changeQty(4, -1)">-</button> <span id="qty-4">0</span> <button onclick="changeQty(4, 1)">+</button></div>
      </div>
    </div>

    <h3>Game Drive (USB)</h3>
    <div class="category-box">
      <div class="accessory">USB2.0 64GB (21 Games) - ₹899
        <div><button onclick="changeQty(5, -1)">-</button> <span id="qty-5">0</span> <button onclick="changeQty(5, 1)">+</button></div>
      </div>
      <div class="accessory">USB3.0 128GB (41 Games) - ₹1599
        <div><button onclick="changeQty(6, -1)">-</button> <span id="qty-6">0</span> <button onclick="changeQty(6, 1)">+</button></div>
      </div>
      <div class="accessory">USB3.0 256GB SSD (71 Games) - ₹3499
        <div><button onclick="changeQty(7, -1)">-</button> <span id="qty-7">0</span> <button onclick="changeQty(7, 1)">+</button></div>
      </div>
      <div class="accessory">USB3.0 500GB HDD (175 Games) - ₹3999
        <div><button onclick="changeQty(8, -1)">-</button> <span id="qty-8">0</span> <button onclick="changeQty(8, 1)">+</button></div>
      </div>
    </div>

    <h3>Controllers &amp; Cards</h3>
    <div class="category-box">
      <div class="accessory">MEMORY CARD 8MB FMCB - ₹699
        <div><button onclick="changeQty(9, -1)">-</button> <span id="qty-9">0</span> <button onclick="changeQty(9, 1)">+</button></div>
      </div>
      <div class="accessory">Wired Gamepad - ₹465
        <div><button onclick="changeQty(10, -1)">-</button> <span id="qty-10">0</span> <button onclick="changeQty(10, 1)">+</button></div>
      </div>
      <div class="accessory">Wireless Gamepad - ₹740
        <div><button onclick="changeQty(11, -1)">-</button> <span id="qty-11">0</span> <button onclick="changeQty(11, 1)">+</button></div>
      </div>
    </div>
  </div>

  <!-- Added Accessories Summary -->
  <div style="margin: 30px auto 10px; max-width: 600px; background: #fff; padding: 15px 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1);">
    <h3 style="margin-bottom: 10px; text-align: center; font-size: 18px; color: #131921;">Added Accessories</h3>
    <ul id="accessorySummaryList" style="font-size: 14px; color: #333; padding-left: 20px; margin-bottom: 10px;"></ul>
    <div style="text-align: center; font-weight: bold;">Total Items: <span id="totalItems">0</span></div>
  </div>

  <!-- Customer Form -->
  <div style="margin: 30px auto; padding: 25px; max-width: 600px; background: #fefefe; border-radius: 12px; box-shadow: 0 0 15px rgba(0,0,0,0.1);">
    <h3 style="margin-bottom: 20px; text-align: center;">Customer Details (Add your details correctly)</h3>
    <form id="customerForm">
      <input name="name" placeholder="Name *" required style="width: 100%; padding: 10px; margin-bottom: 15px;" type="text"/>
      <input name="mobile" pattern="[0-9]{10}" placeholder="Mobile *" required style="width: 100%; padding: 10px; margin-bottom: 15px;" title="Enter 10-digit mobile number" type="tel"/>
      <input name="alt_mobile" pattern="[0-9]{10}" placeholder="Alt Mobile *" required style="width: 100%; padding: 10px; margin-bottom: 15px;" title="Enter 10-digit mobile number" type="tel"/>
      <input name="email" placeholder="Email" style="width: 100%; padding: 10px; margin-bottom: 15px;" type="email"/>
      <textarea name="address" placeholder="Address *" required style="width: 100%; padding: 10px; margin-bottom: 15px;"></textarea>
      <input name="landmark" placeholder="Landmark" style="width: 100%; padding: 10px; margin-bottom: 15px;" type="text"/>
      <input name="pincode" placeholder="Pincode *" required style="width: 100%; padding: 10px; margin-bottom: 15px;" type="text"/>
      <input name="city" placeholder="City *" required style="width: 100%; padding: 10px; margin-bottom: 10px;" type="text"/>
    </form>
  </div>

  <div style="margin: 10px auto 20px; text-align: center;">
    <div style="display: inline-block; background: #e8f5e9; color: #2e7d32; font-weight: bold; font-size: 16px; padding: 10px 20px; border-radius: 8px; box-shadow: 0 0 6px rgba(0,0,0,0.1);">
      After entering customer details, now pay via UPI
    </div>
  </div>

  <!-- Order Summary Top -->
  <div style="margin: 30px auto; padding: 20px; max-width: 600px; background: #e8f5e9; border-radius: 12px; box-shadow: 0 0 15px rgba(0,0,0,0.1);">
    <h3 style="text-align: center; margin-bottom: 15px; color: #2e7d32;">Your Order Summary</h3>
    <ul id="accessorySummaryListTop" style="font-size: 14px; color: #333; padding-left: 20px; margin-bottom: 10px;"></ul>
    <div><strong>Warranty:</strong> <span id="topWarranty">1 month</span></div>
    <div><strong>Total Items:</strong> <span id="topTotalItems">0</span></div>
    <div><strong>Accessories Total:</strong> ₹<span id="topAccessoriesTotal">0</span></div>
    <div><strong>Grand Total:</strong> ₹<span id="topGrandTotal">6299</span></div>
  </div>

  <!-- Payment Method -->
  <div style="margin: 30px auto; padding: 20px; max-width: 600px; background: #fff7e6; border-radius: 12px; box-shadow: 0 0 15px rgba(0,0,0,0.1);">
    <h3 style="text-align: center; margin-bottom: 15px;">Choose Payment Method</h3>
    <div style="display: flex; justify-content: space-around; margin-bottom: 15px;">
      <label><input type="radio" name="paymentMode" value="prepaid" checked onchange="togglePaymentMode()"> Full Payment</label>
      <label><input type="radio" name="paymentMode" value="cod" onchange="togglePaymentMode()"> Cash on Delivery</label>
    </div>
    <div id="codDetails" style="display:none; font-size: 14px; color: #333; line-height: 1.6;">
      <p><strong>Courier Charges:</strong> ₹450 (added)</p>
      <p><strong>Advance to Pay Now (10%):</strong> ₹<span id="codAdvance">0</span></p>
      <p><strong>Amount to Pay on Delivery:</strong> ₹<span id="codDue">0</span></p>
    </div>
    <div id="prepaidDetails" style="display:block; font-size: 14px; color: #333; line-height: 1.6;">
      <p><strong>Prepaid Courier Charges:</strong> ₹299 (added)</p>
    </div>
  </div>

  <!-- UPI Buttons -->
  <div id="upiButtonsFixed" style="
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        margin-top: 20px;
    ">
    <a href="#" id="upiPaytm" onclick="updateUpiLink('upiPaytm')" style="background: #002970; color: white; font-weight: bold; padding: 10px 20px; border-radius: 8px; text-decoration: none; width: 90%; max-width: 400px; text-align: center;">
      Pay via Paytm
    </a>
    <a href="#" id="upiGPay" onclick="updateUpiLink('upiGPay')" style="background: #4285F4; color: white; font-weight: bold; padding: 10px 20px; border-radius: 8px; text-decoration: none; width: 90%; max-width: 400px; text-align: center;">Pay via GPay</a>
  </div>

  <div style="margin: 20px auto 10px; text-align: center;">
    <div style="display: inline-block; background: #fff3e0; color: #e65100; font-weight: bold; font-size: 16px; padding: 10px 20px; border-radius: 8px; box-shadow: 0 0 6px rgba(0,0,0,0.1);">
      After successful payment, now click on Buy Now
    </div>
  </div>

  <div style="text-align: center; margin-top: 40px;">
    <h2 style="color: #25D366; font-weight: bold;">Order on WhatsApp</h2>
  </div>
  <div style="text-align: center; margin-top: 10px;">
    <button onclick="sendOrderToWhatsApp()" style="background-color: #25D366; color: white; font-size: 16px; padding: 12px 30px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">
      Send Order to WhatsApp
    </button>
  </div>

  <div style="margin-top: 2rem; padding: 1rem; border-top: 1px solid #ccc; font-size: 15px; line-height: 1.8; color: #333;">
    <strong>Warranty Information:</strong><br/>
    • <strong>PS2 Console:</strong> Minimum 1-month warranty included.<br/>
    • <strong>Additional Warranty:</strong> ₹300 per additional month.<br/>
    • <strong>Accessories:</strong> 1-Day Testing warranty only.<br/>
    • <strong>USB Drives:</strong> 6-months warranty.
  </div>

  <!-- YouTube Channels -->
  <div style="text-align: center; margin-top: 30px;">
    <h3>Our YouTube Channels</h3>
    <div style="display: flex; flex-direction: column; gap: 15px; align-items: center;">
      <a href="https://youtube.com/@singhtechgaming" style="background: #ff0000; color: white; padding: 10px 20px; border-radius: 6px; text-decoration: none; font-weight: bold; width: 90%; max-width: 400px;" target="_blank">
        Singh Tech Gaming
      </a>
      <a href="https://youtube.com/@gamesplanet13" style="background: #2ecc71; color: white; padding: 10px 20px; border-radius: 6px; text-decoration: none; font-weight: bold; width: 90%; max-width: 400px;" target="_blank">
        Games Planet 13
      </a>
      <a href="https://youtube.com/@gamesvallah" style="background: #3498db; color: white; padding: 10px 20px; border-radius: 6px; text-decoration: none; font-weight: bold; width: 90%; max-width: 400px;" target="_blank">
        Games Vallah
      </a>
      <a href="https://youtube.com/@gamingtechindi" style="background: #f39c12; color: white; padding: 10px 20px; border-radius: 6px; text-decoration: none; font-weight: bold; width: 90%; max-width: 400px;" target="_blank">
        Gaming Tech India
      </a>
    </div>
  </div>

  <div style="text-align: center; margin-top: 25px;">
    <a href="https://www.instagram.com/singhtech1?igsh=MTMzeG4zbXhnMjN5Zw==" style="background: #e4405f; color: white; padding: 10px 25px; border-radius: 8px; text-decoration: none; font-weight: bold; font-size: 16px;" target="_blank">
      Follow us on Instagram
    </a>
  </div>

  <div style="margin-top: 40px; text-align: center;">
    <h3>Watch Product Demo</h3>
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1);">
      <iframe allowfullscreen="" frameborder="0" src="https://www.youtube.com/embed/py-V7CQjcYM" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></iframe>
    </div>
  </div>

</div> <!-- container end -->

<div id="totalSticky">
  Total: ₹<span id="stickyTotal">6299</span>
</div>

<div style="text-align: center; margin-top: 40px;">
  <h3>Contact Us</h3>
  <div class="contact-icons">
    <a href="tel:7983624797" title="Call">
      <i class="fas fa-phone"></i>
    </a>
    <a href="https://wa.me/917983624797" target="_blank" title="WhatsApp">
      <i class="fab fa-whatsapp"></i>
    </a>
    <a href="mailto:gamesplanet.7983624797@gmail.com" title="Email">
      <i class="fas fa-envelope"></i>
    </a>
  </div>
</div>

<footer style="text-align: center; padding: 20px 0; font-size: 14px; color: #777;">
  All rights reserved © 2017–2025
</footer>

<script>
/* ------------------ COLOR DATA + DISPLAY ------------------ */
const colorData = {
  black: { price: 6299, mrp: 7399 },
  white: { price: 6799, mrp: 7999 },
  silver: { price: 6999, mrp: 8249 }
};

function updateColorDisplay() {
  const colorSel = document.getElementById('ps2Color').value;
  const base = colorData[colorSel].price;
  const mrp = colorData[colorSel].mrp;
  const discount = Math.round(((mrp - base) / mrp) * 100);
  const mrpEl = document.getElementById('mrpValue');
  const baseEl = document.getElementById('basePriceDisplay');
  const discEl = document.getElementById('discountPercent');
  if (mrpEl) mrpEl.innerText = '₹' + mrp;
  if (baseEl) baseEl.innerText = '₹' + base;
  if (discEl) discEl.innerText = `(${discount}% OFF)`;
}

/* ------------------ BASES & PRICES ------------------ */
let warranty = 1;
// prices array matches order of accessory names below
const prices = [499, 199, 550, 90, 299, 899, 1599, 3499, 3999, 699, 465, 740];
let quantities = Array(prices.length).fill(0);

/* ------------------ HELPERS ------------------ */
function changeWarranty(val) {
  warranty = Math.max(1, warranty + val);
  document.getElementById('warranty').innerText = warranty;
  updateTotal();
}

function changeQty(index, delta) {
  quantities[index] = Math.max(0, quantities[index] + delta);
  const el = document.getElementById(`qty-${index}`);
  if (el) el.innerText = quantities[index];
  updateTotal();
}

/* accessory summaries */
function updateAccessorySummary() {
  const names = ["Power Adapter with Cable", "AV Cable", "HDMI Converter", "HDMI Normal", "HDMI Best", "USB 64GB", "USB 128GB", "USB 256GB SSD", "USB 500GB HDD", "Memory Card 8MB FMCB", "Wired Gamepad", "Wireless Gamepad"];
  const summaryList = document.getElementById('accessorySummaryList');
  const summaryTopList = document.getElementById('accessorySummaryListTop');
  const totalItemsSpan = document.getElementById('totalItems');
  if (summaryList) summaryList.innerHTML = '';
  if (summaryTopList) summaryTopList.innerHTML = '';
  let itemCount = 1; // console included

  const ps2Item = document.createElement('li');
  ps2Item.innerText = "PS2 Slim x1";
  if (summaryList) summaryList.appendChild(ps2Item);
  if (summaryTopList) summaryTopList.appendChild(ps2Item.cloneNode(true));

  for (let i = 0; i < quantities.length; i++) {
    if (quantities[i] > 0) {
      const li = document.createElement('li');
      li.innerText = `${names[i]} x${quantities[i]}`;
      if (summaryList) summaryList.appendChild(li);
      if (summaryTopList) summaryTopList.appendChild(li.cloneNode(true));
      itemCount += quantities[i];
    }
  }

  if (totalItemsSpan) totalItemsSpan.innerText = itemCount;
  const topTotalItems = document.getElementById('topTotalItems');
  if (topTotalItems) topTotalItems.innerText = itemCount;
}

/* ------------------ TOTALS & UPI ------------------ */
function updateTotal() {
  const colorSel = document.getElementById('ps2Color').value;
  const basePrice = colorData[colorSel].price;
  const basePriceDisplay = document.getElementById('basePriceDisplay');
  if (basePriceDisplay) basePriceDisplay.innerText = '₹' + basePrice;

  let total = basePrice + (warranty - 1) * 300;
  for (let i = 0; i < prices.length; i++) {
    total += quantities[i] * prices[i];
  }

  const paymentModeEl = document.querySelector('input[name="paymentMode"]:checked');
  const isCOD = paymentModeEl && paymentModeEl.value === 'cod';

  if (isCOD) {
    const courier = 450;
    total += courier;
    document.getElementById('codDetails').style.display = 'block';
    document.getElementById('prepaidDetails').style.display = 'none';

    // Advance / due logic (10% advance)
    const advance = Math.ceil(total * 0.1);
    const due = total - advance;
    document.getElementById('codAdvance').innerText = advance;
    document.getElementById('codDue').innerText = due;
    document.getElementById('stickyTotal').innerText = advance; // sticky shows amount to pay now
  } else {
    const courier = 299;
    total += courier;
    document.getElementById('prepaidDetails').style.display = 'block';
    document.getElementById('codDetails').style.display = 'none';
    document.getElementById('stickyTotal').innerText = total;
  }

  // update summaries + UPI
  updateAccessorySummary();
  updateTopSummary();
  updateUpiLink('upiPaytm');
  updateUpiLink('upiGPay');
}

function updateTopSummary() {
  let accessoriesTotal = 0;
  let totalItems = 1;
  const summaryTopList = document.getElementById('accessorySummaryListTop');
  if (summaryTopList) summaryTopList.innerHTML = '';
  const names = ["Power Adapter with Cable", "AV Cable", "HDMI Converter", "HDMI Normal", "HDMI Best", "USB 64GB", "USB 128GB", "USB 256GB SSD", "USB 500GB HDD", "Memory Card 8MB FMCB", "Wired Gamepad", "Wireless Gamepad"];

  const ps2Item = document.createElement('li');
  ps2Item.innerText = "PS2 Slim x1";
  if (summaryTopList) summaryTopList.appendChild(ps2Item);

  for (let i = 0; i < quantities.length; i++) {
    if (quantities[i] > 0) {
      const li = document.createElement('li');
      li.innerText = `${names[i]} x${quantities[i]}`;
      if (summaryTopList) summaryTopList.appendChild(li);
      accessoriesTotal += quantities[i] * prices[i];
      totalItems += quantities[i];
    }
  }

  const topWarranty = document.getElementById('topWarranty');
  if (topWarranty) topWarranty.innerText = `${warranty} month${warranty > 1 ? 's' : ''}`;
  const topTotalItems = document.getElementById('topTotalItems');
  if (topTotalItems) topTotalItems.innerText = totalItems;
  const topAccessoriesTotal = document.getElementById('topAccessoriesTotal');
  if (topAccessoriesTotal) topAccessoriesTotal.innerText = accessoriesTotal;

  const colorSel = document.getElementById('ps2Color').value;
  const base = colorData[colorSel].price;
  let grandTotal = base + (warranty - 1) * 300 + accessoriesTotal;
  const payment = document.querySelector('input[name="paymentMode"]:checked')?.value;
  if (payment === 'prepaid') grandTotal += 299;
  else grandTotal += 450;
  const topGrandTotal = document.getElementById('topGrandTotal');
  if (topGrandTotal) topGrandTotal.innerText = grandTotal;
}

/* Build UPI link updates (for Paytm/GPay anchors) */
function updateUpiLink(id) {
  const upiAddress = 'paytmqr5hyx5o@ptys';
  const isCOD = document.querySelector('input[name="paymentMode"]:checked')?.value === 'cod';
  let amount;
  if (isCOD) {
    amount = document.getElementById('codAdvance')?.innerText || document.getElementById('stickyTotal')?.innerText;
  } else {
    amount = document.getElementById('stickyTotal')?.innerText;
  }
  if (!amount) amount = '0';
  amount = String(amount).replace(/[^\d]/g, '');
  const upiUrl = `upi://pay?pa=${upiAddress}&pn=PS2%20Order&cu=INR&am=${amount}`;
  const el = document.getElementById(id);
  if (el) el.setAttribute('href', upiUrl);
}

/* toggle payment mode (prepaid/cod) */
function togglePaymentMode() {
  updateTotal();
}

/* ------------------ WhatsApp Order Builder (patched) ------------------ */
function sendOrderToWhatsApp() {
  const form = document.querySelector('#customerForm');
  const formData = new FormData(form);
  const now = new Date();
  const orderID = `${String(now.getDate()).padStart(2,'0')}.${String(now.getMonth()+1).padStart(2,'0')}.${String(now.getFullYear()).toString().slice(-2)}.${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}pm`;

  let msg = `*Order ID:* ${orderID}%0A%0A*Customer Details:*%0A`;
  formData.forEach((val, key) => {
    const label = key.replace('_', ' ').replace(/\b\w/g, c => c.toUpperCase());
    msg += `${label}: ${val}%0A`;
  });

  // payment mode first
  const isCOD = document.querySelector('input[name="paymentMode"]:checked')?.value === 'cod';
  let courierCharge, orderType, courierText;
  if (isCOD) {
    orderType = "COD Order";
    courierCharge = 450;
    courierText = "COD Courier Charges";
  } else {
    orderType = "Prepaid Order";
    courierCharge = 299;
    courierText = "Prepaid Courier Charges";
  }

  msg += `%0A*${orderType}*%0A${courierText}: ₹${courierCharge}%0A`;

  const colorText = document.getElementById('ps2Color').options[document.getElementById('ps2Color').selectedIndex].text;
  msg += `%0A*PS2 Order:*%0AConsole: ${colorText}%0AWarranty: ${warranty} months - ₹${(warranty - 1) * 300}%0A`;

  const names = ["Power Adapter with Cable", "AV Cable", "HDMI Converter", "HDMI Normal", "HDMI Best", "USB 64GB", "USB 128GB", "USB 256GB SSD", "USB 500GB HDD", "Memory Card 8MB FMCB", "Wired Gamepad", "Wireless Gamepad"];
  for (let i = 0; i < quantities.length; i++) {
    if (quantities[i] > 0) {
      msg += `${names[i]} x${quantities[i]} - ₹${quantities[i] * prices[i]}%0A`;
    }
  }

  let totalToShow = '';
  if (isCOD) {
    totalToShow = document.getElementById('codAdvance').innerText + ' (advance) + ' + document.getElementById('codDue').innerText + ' (on delivery)';
  } else {
    totalToShow = document.getElementById('stickyTotal').innerText;
  }
  msg += `%0A*Total: ${totalToShow}*`;

  const whatsappURL = `https://wa.me/917983624797?text=${msg}`;
  window.open(whatsappURL, '_blank');
}

/* ------------------ Init on load ------------------ */
document.addEventListener('DOMContentLoaded', () => {
  // initialize qty displays
  for (let i = 0; i < prices.length; i++) {
    const el = document.getElementById(`qty-${i}`);
    if (el) el.innerText = quantities[i];
  }
  updateColorDisplay();
  updateTotal();
});
</script>

</body>
</html>
